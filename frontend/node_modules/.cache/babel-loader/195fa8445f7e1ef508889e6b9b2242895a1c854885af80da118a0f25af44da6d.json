{"ast":null,"code":"import _toConsumableArray from \"/home/saymon/Backup/Portifolio/Hematology-App-with-Carbon-Design-System/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n/**\n * Copyright IBM Corp. 2016, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport findLast from 'lodash.findlast';\nimport { DOCUMENT_POSITION_BROAD_PRECEDING, selectorTabbable, DOCUMENT_POSITION_BROAD_FOLLOWING } from './keyboard/navigation.js';\n\n/**\n * @param {Node} node A DOM node.\n * @param {string[]} selectorsFloatingMenus The CSS selectors that matches floating menus.\n * @returns {boolean} `true` of the given `node` is in a floating menu.\n */\nfunction elementOrParentIsFloatingMenu(node) {\n  var selectorsFloatingMenus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  if (node && typeof node.closest === 'function') {\n    var allSelectorsFloatingMenus = [\".cds--overflow-menu-options\", \".cds--tooltip\", '.flatpickr-calendar'].concat(_toConsumableArray(selectorsFloatingMenus));\n    return allSelectorsFloatingMenus.some(function (selector) {\n      return node.closest(selector);\n    });\n  }\n}\n\n/**\n * Ensures the focus is kept in the given `modalNode`, implementing \"focus-wrap\" behavior.\n * @param {object} options The options.\n * @param {HTMLElement|null} options.bodyNode\n * @param {HTMLElement|null} options.startTrapNode The DOM node of the focus sentinel the is placed earlier next to `modalNode`.\n * @param {HTMLElement|null} options.endTrapNode The DOM node of the focus sentinel the is placed next to `modalNode`.\n * @param {HTMLElement} options.currentActiveNode The DOM node that has focus.\n * @param {HTMLElement} options.oldActiveNode The DOM node that previously had focus.\n * @param {string[]} [options.selectorsFloatingMenus] The CSS selectors that matches floating menus.\n */\nfunction wrapFocus(_ref) {\n  var bodyNode = _ref.bodyNode,\n    startTrapNode = _ref.startTrapNode,\n    endTrapNode = _ref.endTrapNode,\n    currentActiveNode = _ref.currentActiveNode,\n    oldActiveNode = _ref.oldActiveNode,\n    selectorsFloatingMenus = _ref.selectorsFloatingMenus;\n  if (bodyNode && currentActiveNode && oldActiveNode && !bodyNode.contains(currentActiveNode) && !elementOrParentIsFloatingMenu(currentActiveNode, selectorsFloatingMenus)) {\n    var comparisonResult = oldActiveNode.compareDocumentPosition(currentActiveNode);\n    if (currentActiveNode === startTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_PRECEDING) {\n      var tabbable = findLast(bodyNode.querySelectorAll(selectorTabbable), function (elem) {\n        return Boolean(elem.offsetParent);\n      });\n      if (tabbable) {\n        tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    } else if (currentActiveNode === endTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_FOLLOWING) {\n      var _tabbable = Array.prototype.find.call(bodyNode.querySelectorAll(selectorTabbable), function (elem) {\n        return Boolean(elem.offsetParent);\n      });\n      if (_tabbable) {\n        _tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    }\n  }\n}\nexport { wrapFocus as default, elementOrParentIsFloatingMenu };","map":{"version":3,"names":["findLast","DOCUMENT_POSITION_BROAD_PRECEDING","selectorTabbable","DOCUMENT_POSITION_BROAD_FOLLOWING","elementOrParentIsFloatingMenu","node","selectorsFloatingMenus","arguments","length","undefined","closest","allSelectorsFloatingMenus","concat","_toConsumableArray","some","selector","wrapFocus","_ref","bodyNode","startTrapNode","endTrapNode","currentActiveNode","oldActiveNode","contains","comparisonResult","compareDocumentPosition","tabbable","querySelectorAll","elem","Boolean","offsetParent","focus","Array","prototype","find","call","default"],"sources":["/home/saymon/Backup/Portifolio/Hematology-App-with-Carbon-Design-System/frontend/node_modules/@carbon/react/es/internal/wrapFocus.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2016, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport findLast from 'lodash.findlast';\nimport { DOCUMENT_POSITION_BROAD_PRECEDING, selectorTabbable, DOCUMENT_POSITION_BROAD_FOLLOWING } from './keyboard/navigation.js';\n\n/**\n * @param {Node} node A DOM node.\n * @param {string[]} selectorsFloatingMenus The CSS selectors that matches floating menus.\n * @returns {boolean} `true` of the given `node` is in a floating menu.\n */\nfunction elementOrParentIsFloatingMenu(node) {\n  let selectorsFloatingMenus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  if (node && typeof node.closest === 'function') {\n    const allSelectorsFloatingMenus = [`.cds--overflow-menu-options`, `.cds--tooltip`, '.flatpickr-calendar', ...selectorsFloatingMenus];\n    return allSelectorsFloatingMenus.some(selector => node.closest(selector));\n  }\n}\n\n/**\n * Ensures the focus is kept in the given `modalNode`, implementing \"focus-wrap\" behavior.\n * @param {object} options The options.\n * @param {HTMLElement|null} options.bodyNode\n * @param {HTMLElement|null} options.startTrapNode The DOM node of the focus sentinel the is placed earlier next to `modalNode`.\n * @param {HTMLElement|null} options.endTrapNode The DOM node of the focus sentinel the is placed next to `modalNode`.\n * @param {HTMLElement} options.currentActiveNode The DOM node that has focus.\n * @param {HTMLElement} options.oldActiveNode The DOM node that previously had focus.\n * @param {string[]} [options.selectorsFloatingMenus] The CSS selectors that matches floating menus.\n */\nfunction wrapFocus(_ref) {\n  let {\n    bodyNode,\n    startTrapNode,\n    endTrapNode,\n    currentActiveNode,\n    oldActiveNode,\n    selectorsFloatingMenus\n  } = _ref;\n  if (bodyNode && currentActiveNode && oldActiveNode && !bodyNode.contains(currentActiveNode) && !elementOrParentIsFloatingMenu(currentActiveNode, selectorsFloatingMenus)) {\n    const comparisonResult = oldActiveNode.compareDocumentPosition(currentActiveNode);\n    if (currentActiveNode === startTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_PRECEDING) {\n      const tabbable = findLast(bodyNode.querySelectorAll(selectorTabbable), elem => Boolean(elem.offsetParent));\n      if (tabbable) {\n        tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    } else if (currentActiveNode === endTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_FOLLOWING) {\n      const tabbable = Array.prototype.find.call(bodyNode.querySelectorAll(selectorTabbable), elem => Boolean(elem.offsetParent));\n      if (tabbable) {\n        tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    }\n  }\n}\n\nexport { wrapFocus as default, elementOrParentIsFloatingMenu };\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,QAAQ,MAAM,iBAAiB;AACtC,SAASC,iCAAiC,EAAEC,gBAAgB,EAAEC,iCAAiC,QAAQ,0BAA0B;;AAEjI;AACA;AACA;AACA;AACA;AACA,SAASC,6BAA6BA,CAACC,IAAI,EAAE;EAC3C,IAAIC,sBAAsB,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;EACnG,IAAIF,IAAI,IAAI,OAAOA,IAAI,CAACK,OAAO,KAAK,UAAU,EAAE;IAC9C,IAAMC,yBAAyB,oDAAoD,qBAAqB,EAAAC,MAAA,CAAAC,kBAAA,CAAKP,sBAAsB,EAAC;IACpI,OAAOK,yBAAyB,CAACG,IAAI,CAAC,UAAAC,QAAQ;MAAA,OAAIV,IAAI,CAACK,OAAO,CAACK,QAAQ,CAAC;IAAA,EAAC;EAC3E;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,SAASA,CAACC,IAAI,EAAE;EACvB,IACEC,QAAQ,GAMND,IAAI,CANNC,QAAQ;IACRC,aAAa,GAKXF,IAAI,CALNE,aAAa;IACbC,WAAW,GAITH,IAAI,CAJNG,WAAW;IACXC,iBAAiB,GAGfJ,IAAI,CAHNI,iBAAiB;IACjBC,aAAa,GAEXL,IAAI,CAFNK,aAAa;IACbhB,sBAAsB,GACpBW,IAAI,CADNX,sBAAsB;EAExB,IAAIY,QAAQ,IAAIG,iBAAiB,IAAIC,aAAa,IAAI,CAACJ,QAAQ,CAACK,QAAQ,CAACF,iBAAiB,CAAC,IAAI,CAACjB,6BAA6B,CAACiB,iBAAiB,EAAEf,sBAAsB,CAAC,EAAE;IACxK,IAAMkB,gBAAgB,GAAGF,aAAa,CAACG,uBAAuB,CAACJ,iBAAiB,CAAC;IACjF,IAAIA,iBAAiB,KAAKF,aAAa,IAAIK,gBAAgB,GAAGvB,iCAAiC,EAAE;MAC/F,IAAMyB,QAAQ,GAAG1B,QAAQ,CAACkB,QAAQ,CAACS,gBAAgB,CAACzB,gBAAgB,CAAC,EAAE,UAAA0B,IAAI;QAAA,OAAIC,OAAO,CAACD,IAAI,CAACE,YAAY,CAAC;MAAA,EAAC;MAC1G,IAAIJ,QAAQ,EAAE;QACZA,QAAQ,CAACK,KAAK,CAAC,CAAC;MAClB,CAAC,MAAM,IAAIb,QAAQ,KAAKI,aAAa,EAAE;QACrCJ,QAAQ,CAACa,KAAK,CAAC,CAAC;MAClB;IACF,CAAC,MAAM,IAAIV,iBAAiB,KAAKD,WAAW,IAAII,gBAAgB,GAAGrB,iCAAiC,EAAE;MACpG,IAAMuB,SAAQ,GAAGM,KAAK,CAACC,SAAS,CAACC,IAAI,CAACC,IAAI,CAACjB,QAAQ,CAACS,gBAAgB,CAACzB,gBAAgB,CAAC,EAAE,UAAA0B,IAAI;QAAA,OAAIC,OAAO,CAACD,IAAI,CAACE,YAAY,CAAC;MAAA,EAAC;MAC3H,IAAIJ,SAAQ,EAAE;QACZA,SAAQ,CAACK,KAAK,CAAC,CAAC;MAClB,CAAC,MAAM,IAAIb,QAAQ,KAAKI,aAAa,EAAE;QACrCJ,QAAQ,CAACa,KAAK,CAAC,CAAC;MAClB;IACF;EACF;AACF;AAEA,SAASf,SAAS,IAAIoB,OAAO,EAAEhC,6BAA6B"},"metadata":{},"sourceType":"module","externalDependencies":[]}